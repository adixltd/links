<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <title>Team Adix — Start</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- PWA basics -->
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#0B59B5" />
    <link rel="apple-touch-icon" href="icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Adix" />

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />

    <style>
      /* Brand colors tuned to match the Adix logo */
      :root{
        --brand:#0B59B5;           /* Adix blue */
        --brand-ink:#0A3F86;       /* darker blue for shadow/hover */
        --bg:#fbfdff; --card:#ffffff; --text:#1f2937;
        --muted:#6b7280; --border:#ecf0ff; --soft:#f6f8ff;
      }
      [data-theme="dark"]{
        --bg:#0a0f1f; --card:#0f172a; --text:#e5e7eb; --muted:#9aa3b2;
        --border:#1f2a44; --soft:#0e1731;
      }
      *{box-sizing:border-box} html,body{height:100%}
      body{
        margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Helvetica Neue","Noto Sans",sans-serif;
        color:var(--text); background:var(--bg);
        display:flex; align-items:center; justify-content:center; padding:20px;
      }
      .shell{width:100%; max-width:560px}
      .card{
        background:var(--card); border:1px solid var(--border); border-radius:20px;
        box-shadow:0 10px 30px rgba(11,89,181,.12); padding:24px;
      }
      .topbar{position:relative; height:0}
      .mode-btn{
        position:absolute; right:8px; top:6px; border:1px solid var(--border); background:var(--soft);
        padding:8px 12px; border-radius:999px; display:inline-flex; gap:8px; align-items:center;
        color:var(--muted); font-weight:600; cursor:pointer
      }

      /* Header: centered logo + title */
      .header{display:flex; flex-direction:column; align-items:center; gap:10px; margin-top:6px}
      .logo{width:68px; height:68px; border-radius:16px; object-fit:contain; background:#fff; border:1px solid var(--border)}
      .title{font-weight:800; font-size:1.25rem; text-align:center}

      /* Body */
      .main{margin-top:18px; text-align:center}
      .headline{font-size:1.05rem; font-weight:800; margin:10px 0 6px}
      .sub{color:var(--muted); margin:0 0 10px}

      .btn{
        border:none; border-radius:12px; padding:12px 18px; font-weight:800; cursor:pointer;
        display:inline-flex; gap:10px; align-items:center; transition:transform .06s ease, box-shadow .2s ease;
      }
      .btn-primary{
        background:linear-gradient(0deg, var(--brand) 0%, var(--brand) 100%);
        color:#fff; box-shadow:0 6px 14px rgba(11,89,181,.35)
      }
      .btn-primary:hover{transform:translateY(-1px)}
      .btn-outline{
        border:1px solid rgba(11,89,181,.35); background:transparent; color:var(--brand);
      }
      .btn-row{display:flex; gap:10px; justify-content:center; margin-top:8px; flex-wrap:wrap}

      /* Collapsible guide (bottom) */
      .guide{margin-top:18px; border-top:1px solid var(--border); padding-top:14px}
      details{border:1px dashed var(--border); border-radius:14px; padding:14px; background:var(--soft)}
      summary{cursor:pointer; list-style:none; display:flex; gap:10px; align-items:center; font-weight:800}
      summary::-webkit-details-marker{display:none}
      .steps{margin:10px 0 2px; padding-left:18px; color:var(--text)}
      .muted{color:var(--muted); font-size:.9rem; margin-top:10px; text-align:center}
      .install-btn{
        margin-top:10px; border:1px solid rgba(11,89,181,.35); background:transparent; color:var(--brand);
        border-radius:10px; padding:10px 14px; font-weight:700; display:inline-flex; align-items:center; gap:8px;
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <div class="card">
        <!-- top-right theme toggle -->
        <div class="topbar">
          <button id="modeBtn" class="mode-btn" type="button">
            <i class="bi bi-brightness-high-fill"></i><span>Light</span>
          </button>
        </div>

        <!-- centered header -->
        <div class="header">
          <img class="logo" src="https://raw.githubusercontent.com/adixltd/adix-assets/main/ADIX%20LOGO%20V5.01%20192.png" alt="Adix" />
          <div class="title">Welcome to Team Adix</div>
        </div>

        <!-- main -->
        <div class="main">
          <div class="headline">Ready to continue?</div>
          <p class="sub">Tap <strong>Proceed</strong> to open the staff app. You can also add it to your home screen later.</p>
          <div class="btn-row">
            <!-- Open in the default browser/tab -->
            <a id="proceedLink" class="btn btn-primary" href="#" target="_self" rel="noopener">
              <i class="bi bi-arrow-right-circle-fill"></i> Proceed to App
            </a>
            <!-- Install is always visible; if install prompt is unavailable, it opens the instructions -->
            <button id="installBtn" class="btn btn-outline" type="button">
              <i class="bi bi-plus-circle"></i> Install App
            </button>
          </div>
        </div>

        <!-- collapsible install guide at the bottom -->
        <div class="guide">
          <details id="installGuide">
            <summary><i class="bi bi-download"></i> How to add to Home Screen (Android &amp; iOS)</summary>
            <div style="margin-top:10px">
              <strong>Android (Chrome)</strong>
              <ol class="steps">
                <li>Tap the <strong>⋮</strong> menu in Chrome.</li>
                <li>Choose <strong>Add to Home screen</strong> or <strong>Install app</strong>.</li>
                <li>Tap <strong>Add/Install</strong>. You’ll get the Adix icon on your home screen.</li>
              </ol>
              <strong>iPhone / iPad (Safari)</strong>
              <ol class="steps">
                <li>Open this page in <strong>Safari</strong>.</li>
                <li>Tap the <strong>Share</strong> button <i class="bi bi-box-arrow-up"></i>.</li>
                <li>Select <strong>Add to Home Screen</strong>, then tap <strong>Add</strong>.</li>
              </ol>
            </div>
          </details>
          <div class="muted">After installing, launch from the home screen icon for a full-screen app experience.</div>
        </div>
      </div>
    </div>

    <script>
      // -----------------------------
      // Configuration
      // -----------------------------
      const APP_URL =
        "https://script.google.com/macros/s/AKfycbw8tcqSQEoUaPUK6ubiES29sAfmjh5tfks3a04VOYb5tXXNxBw36r4AwB0HawIFG96n0A/exec?app=staff";

      // Proceed — navigate in current tab (i.e., the user's default browser/tab)
      document.getElementById("proceedLink").addEventListener("click", (e) => {
        e.preventDefault();
        // Use assign() instead of replace() so back button returns to this page if needed:
        window.location.assign(APP_URL);
      });

      // Theme toggle (default LIGHT)
      const THEME_KEY = "adix-theme";
      const modeBtn = document.getElementById("modeBtn");
      function applyTheme(t){
        document.documentElement.setAttribute("data-theme", t);
        modeBtn.querySelector("span").textContent = t === "dark" ? "Dark" : "Light";
        modeBtn.querySelector("i").className = t === "dark" ? "bi bi-moon-stars-fill" : "bi bi-brightness-high-fill";
      }
      applyTheme(localStorage.getItem(THEME_KEY) || "light");
      modeBtn.addEventListener("click", () => {
        const next = (document.documentElement.getAttribute("data-theme") === "dark") ? "light" : "dark";
        localStorage.setItem(THEME_KEY, next);
        applyTheme(next);
      });

      // Service worker (helps installability)
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("sw.js").catch(()=>{});
      }

      // Install button logic:
      // - If Chrome fires 'beforeinstallprompt', clicking Install shows the native install prompt.
      // - Otherwise (iOS or unsupported), clicking Install opens the instructions section.
      let deferredPrompt = null;
      const installBtn = document.getElementById("installBtn");
      const installGuide = document.getElementById("installGuide");

      window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e; // stash the event so we can trigger it later
      });

      installBtn.addEventListener("click", async () => {
        if (deferredPrompt) {
          deferredPrompt.prompt();
          try { await deferredPrompt.userChoice; } catch(_) {}
          deferredPrompt = null;
        } else {
          // Fallback: open the instructions panel
          installGuide.open = true;
          installGuide.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    </script>
  </body>
</html>
